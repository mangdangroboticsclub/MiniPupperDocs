===========================
Assemble Mini Pupper 2 Pro
===========================

.. contents::
  :depth: 2


※ General DIY process:

* Assemble --> Calibration --> Run

※ Attention:

* The MCU(ESP32 and AT32) software are both pre-installed, you don't need to flash any MCU image.
* You don't need to set each servo number as Mini Pupper 2 because the servo number is fixed by the hardware design, please follow the guide to put the servo to the right positions.


Please refer to Mini Pupper 2 Fusion 360 CAD model for your reference: https://a360.co/485n8mP


.. raw:: html

    <iframe src="https://a360.co/485n8mP?mode=embed" width="640" height="480" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>


1. Write the pre-built image into microSD
=========================================

Tools
----------------------------------------
In addition to the tools included in the kit, the following items are required for assembly.

* USB keyboard
* USB mouse
* PC
* microSD card reader
* HDMI Display
* micro HDMI cable
* USB charger


Step 1.1 Charging the battery
-----------------------------

* The battery is charged via USB, see picture for USB socket, and can also be charged while attached to the Mini Pupper body.

※ LED light: Green means there is enough power, and Red means you need to charge it.

※ We recommend 5V/1A adapter, if you use 5V/2A adapter, the battery IC will change it to 1A. It needs about 1 hour to charge 80% and the light will become green, and an additional 1 hour to 100%, anyway, you can use it when the light becomes green.

.. image:: ../../_static/100.jpg
    :align: center

Step 1.2 Download the image
---------------------------

* You can download the pre-built image files from  `Mini Pupper pre-built images <https://drive.google.com/drive/folders/1DzxQ9rpvlqCwoGd5aP0Hki9Wre3UXc-h?usp=sharing>`_

※ “v2Pro_stanford**.img” means the image is for Ubuntu 22.04 version.

* The picture below is the custom carry board.

.. image:: ../../_static/147.v2.jpg
    :align: center

Step 1.3 Write the image into a microSD card
-------------------------------------------------

* Insert the microSD card into your PC's SD card reader and write the image. We recommend the image creation tool balenaEtcher or Win32DiskImager as it is easy and reliable. It may take a while to complete.


2. Position of the screws
=========================

* The pictures show the position of the screws briefly.

.. image:: ../../_static/MPv2.screws1.jpg
    :align: center

.. image:: ../../_static/MPv2.screws2.jpg
    :align: center

.. image:: ../../_static/MPv2.screws3.jpg
    :align: center


3. Legs Assembly
================
Please refer to the below video clip.

.. raw:: html

    <div style="position: relative; height: 0; overflow: hidden; max-width: 100%; height: auto;">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/Ut7UnS3CTZs?mute=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>

Bolt to use
----------------------------------------
* M2x5mm	2x4=8	①+②, ⑤+⑥
* M2x8mm	3x4=12	②+③, ④+⑦, ③+④
* M2x12mm	1x4=4	⑤+⑦
* M2x14mm	1x4=4	③+⑤

Step 3.1 Single leg
----------------------------------------

* Assemble the four legs. The front and back of the right side are the same, and so are the front and back of the left side. Show you how to assemble the right side.

* Video Instructions, please refer to the link https://youtu.be/Ut7UnS3CTZs


* The parts are numbered as follows to explain.

.. image:: ../../_static/1.jpg
    :align: center


Assemble ① and ②

.. image:: ../../_static/2.v2.jpg
    :align: center

.. image:: ../../_static/6.v2.1.jpg
    :align: center

* The two sides of bearings inside ② are different.

.. image:: ../../_static/3.jpg
    :align: center

.. image:: ../../_static/6.v2.jpg
    :align: center

Assemble ② and ③

* Use an M2x8mm screw and an M2 locknut. Insert the screw from the bottom to the top of ③, pass through ② and tighten with the nut. It is important to pay attention to the orientation of ③. Look carefully at the position of the hole in the middle.

.. image:: ../../_static/7.v2.jpg
    :align: center

.. image:: ../../_static/8.v2.jpg
    :align: center


Adjustment of the length of ④

* The length of ④ must match the length of ⑤. When adjusting the length, it is easier to use two long screws to make sure that the lengths match. Once the lengths have been adjusted, take apart all.

.. image:: ../../_static/10.jpg
    :align: center

.. image:: ../../_static/11.jpg
    :align: center

* If it's hard to twist, you can use two screwdrivers to assist.

.. image:: ../../_static/11_1.jpg
    :align: center


Assemble ⑤ and ⑥

* Use one M2x5mm screw. Insert the screws into ⑤ first, insert them into the holes of ⑥, and tighten them. The large hole in ⑥ should be facing the surface.

.. image:: ../../_static/12.jpg
    :align: center

.. image:: ../../_static/13.jpg
    :align: center

.. image:: ../../_static/14.jpg
    :align: center

Assemble ⑤ and ⑦

* Use an M2x12mm screw, an M2 locknut and two sets of ball bearings. Each ball bearing is made up of three parts, the top and bottom parts with the grooved side facing inwards. Insert a screw into a set of ball bearing. Then insert the screw into the hole ⑦. Taking care to look at the warped side of ⑦ to make sure it is facing the right way. Now screw in the another set of ball bearing. Finally, insert screw into ⑤ and tighten it with the nut.

.. image:: ../../_static/15.jpg
    :align: center

.. image:: ../../_static/18.jpg
    :align: center

.. image:: ../../_static/19.jpg
    :align: center

.. image:: ../../_static/21.jpg
    :align: center

.. image:: ../../_static/20.jpg
    :align: center



Assemble ④ and ⑦

* Use an M2x8mm screw and an M2 nut. Insert the screw into ⑦ and put ④ through, then tighten it with the nut. The direction of the front and back of ④ can be either.

Left and right leg

.. image:: ../../_static/22.jpg
    :align: center

.. image:: ../../_static/23.jpg
    :align: center

.. image:: ../../_static/24.jpg
    :align: center

Assemble ③ and ④

* Use an M2x8mm screw and an M2 nut. Insert the screw into ③ and put ④ through, then tighten it with the nut.

Left and right leg

.. image:: ../../_static/25.v2.jpg
    :align: center

.. image:: ../../_static/26.jpg
    :align: center

Assemble ③ and ⑤

* Use M2x14mm screws and two sets of ball bearings. Thread the screws through the bearings, ③, bearings, ⑤, in that order. The screws are not fixed, but you will tighten them when you mount the servo in the next step.

.. image:: ../../_static/27.v2.jpg
    :align: center

.. image:: ../../_static/29.jpg
    :align: center

.. image:: ../../_static/30.jpg
    :align: center

Completion of a right leg


* Now we have one leg on the right side. Here are some pictures so you can see it from different angles. The left leg should be symmetrical with the right one.

.. image:: ../../_static/31.v2.jpg
    :align: center

.. image:: ../../_static/32.jpg
    :align: center

opposite side

.. image:: ../../_static/34.v2.jpg
    :align: center

Step 3.2 Four legs
----------------------------------------

.. image:: ../../_static/36.v2.jpg
    :align: center

Step 3.3 Locktite
----------------------------------------

After Mini Pupper run sometime, some screws or nuts will loose, you have to check and tighten them if needed. It's helpful to understand how it works.

※ We don't recommend new users to use the Loctite at first, you can use it after you have much background.

※ Loctite prevents the nut from loosening, but it is not essential, as it can be tightened only when looseness is noticed.

.. image:: ../../_static/37.jpg
    :align: center

.. image:: ../../_static/45.jpg
    :align: center

* Some screws are also secured with glue as the below picture shows.

.. image:: ../../_static/37_2.jpg
    :align: center

4. Display and Frame of face
===============================

Remove the protective sheet for the display. Fold the thin flexible cable at the edge of the display. Attach the board and the display to the main unit.

.. image:: ../../_static/74.2pro.jpg
    :align: center

.. image:: ../../_static/79.v2.1.jpg
    :align: center

.. image:: ../../_static/79.v2.2.jpg
    :align: center

.. image:: ../../_static/79.v2.3.jpg
    :align: center

* When attaching the display, you can use a stick to gently push the flexible FPC cable, so that it goes as far back as possible. Don't bend this FPC cable at 180 degrees.

.. image:: ../../_static/79.v2.4.jpg
    :align: center

.. image:: ../../_static/79.v2.5.jpg
    :align: center


5. Body Frame and Hips Assembly
===============================

* Before you connect the CM4 module to the carry board, please make sure to remove the protective film on the Thermal Pad.

.. image:: ../../_static/53.v2Pro.jpg
    :align: center


* Don't need to set servo ID for v2 pro version, the servo ID is fixed by hardware design.
* For the position of each servo, please refer to the below picture.

.. image:: ../../_static/52.v2Pro.jpg
    :align: center

Step 5.1 Body center parts
--------------------------

Connect the No.1, 4, 7, 10 servos to the body center parts.

* It is useful to put masking tape on the cables and write the number of servos during this process to make it easier later.


.. image:: ../../_static/49.v2.1.jpg
    :align: center

* Pay attention to the center part direction.

.. image:: ../../_static/49.v2.2.jpg
    :align: center

.. image:: ../../_static/49.v2.3.jpg
    :align: center

Step 5.2 Hip parts
----------------------------------------
Assemble four hip parts, please refer to the servo positions.

.. image:: ../../_static/49.v2.6.jpg
    :align: center

.. image:: ../../_static/49.v2.7.jpg
    :align: center

* Connect the No.1, 4, 7, 10 servos to the servo MCU PCB baord.

.. image:: ../../_static/v2pro.1.jpg
    :align: center

* Connect the rest servos to the servo MCU PCB baord.

.. image:: ../../_static/v2pro.2.jpg
    :align: center

Pay attention to the servo cable connectors' directions.

.. image:: ../../_static/v2pro.2.1.jpg
    :align: center

* Use the DIY cable to connect the top PCB board to the servo MCU PCB baord.

.. image:: ../../_static/v2pro.3.jpg
    :align: center

* Power on the battery and connect to the top PCB board.

.. image:: ../../_static/v2pro.4.jpg
    :align: center

* Connect the four black hip parts to the relative servos(No. 1,4,7,10).

.. image:: ../../_static/v2pro.5.jpg
    :align: center

Connect the four hip parts to the body, please pay attention.

* Don't power off the battery now.
* Ensure all the servo positions are right.

Step 5.3 Front and back body parts
-----------------------------------

Power off the battery, adjust the red cable position and connect the front and back body parts.

.. image:: ../../_static/v2pro.6.jpg
    :align: center

Use the screws to fix the top PCB board.

.. image:: ../../_static/v2pro.7.jpg
    :align: center

You can tighten the servo MCU PCB board with tape.

.. image:: ../../_static/v2pro.7.1.jpg
    :align: center


Power the battery and connect to the top PCB board to ensure the four black hip part positions are right.

.. image:: ../../_static/v2pro.8.jpg
    :align: center


Connect the center parts to the bottom carbon fiber.

.. image:: ../../_static/v2pro.9.jpg
    :align: center

* Be careful of the carbon fiber front and rear orientation.


Step 5.4 Assemble four legs to the body
----------------------------------------

Prepare the four pre-assembled legs

.. image:: ../../_static/v2pro.10.jpg
    :align: center

Pay attention to the theoretically best angles, it's better to meet the theoretically best angles as much as possible.

But don't worry, we'll use the software to calibrate the angles later.

.. image:: ../../_static/v2pro.11.jpg
    :align: center

.. image:: ../../_static/v2pro.12.jpg
    :align: center


Step 5.5 Assemble the battery to the body
-------------------------------------------

.. image:: ../../_static/49.v2.28.jpg
    :align: center

Slide the battery backward and secure it.

.. image:: ../../_static/49.v2.29.jpg
    :align: center

.. image:: ../../_static/85.jpg
    :align: center

.. image:: ../../_static/84.jpg
    :align: center

Step 5.6 Assemble the speaker
------------------------------

.. image:: ../../_static/MP2.Speak.1.jpg
    :align: center

.. image:: ../../_static/MP2.Speak.2.jpg
    :align: center


6. Cover Assembly
=================
Please refer to the below video clip.

.. raw:: html

    <div style="position: relative; height: 0; overflow: hidden; max-width: 100%; height: auto;">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/Nw8dl4CGt9A?mute=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>

Step 6.1 Side panels
----------------------------------------

.. image:: ../../_static/111.v2.jpg
    :align: center

.. image:: ../../_static/112.v2.jpg
    :align: center

Step 6.2 Shin guards
----------------------------------------

* Use four M2x10mm countersunk screws.

.. image:: ../../_static/113.v2.jpg
    :align: center

.. image:: ../../_static/114.v2.jpg
    :align: center

Step 6.3 Shoulders
----------------------------------------

* Insert only the screws first and then insert the shoulder parts into the gap. Insert the 2 mm hex driver into the hole in the shoulder part and tighten the screws.

.. image:: ../../_static/114.v2.2.jpg
    :align: center

.. image:: ../../_static/117.v2.jpg
    :align: center

.. image:: ../../_static/117.v2.2.jpg
    :align: center

.. image:: ../../_static/122.v2.jpg
    :align: center

Step 6.4 Shoes
----------------------------------------

* Put on 4 shoes.

.. image:: ../../_static/122.v2.jpg
    :align: center

.. image:: ../../_static/123.v2.jpg
    :align: center


Complete!
----------



7. Add-On Assembly
===================

Step 7.1 Lidar
----------------------------------------

If you order the Lidar, the 3D-printed Lidar holder and custom cable will be shipped together. You can also print the holder by yourself using the  `STL files <https://drive.google.com/drive/folders/1YyU4w-Ry1G25047BGe2m4Fi_TPRtYV0c?usp=sharing>`_

.. image:: ../../_static/MP2.Lidar.1.jpg
    :align: center

Connect the 3 holders to the 3D-printed part.

.. image:: ../../_static/MP2.Lidar.2.jpg
    :align: center

Connect the custom cable to the Lidar connector on the PCB board.

.. image:: ../../_static/MP2.Lidar.3.jpg
    :align: center

Fix the 3D-printed part on the PCB board.

.. image:: ../../_static/MP2.Lidar.4.jpg
    :align: center

Connect the custom cable to the Lidar module and fix it using the self-tapping screws.

.. image:: ../../_static/MP2.Lidar.5.jpg
    :align: center

Step 7.2 Camera
----------------------------------------

Mini Pupper 2 also supports the single Pi camera or OpenCV OAK-D-Lite camera module. You can also print the holder by yourself using the `STL files <https://drive.google.com/drive/folders/1YyU4w-Ry1G25047BGe2m4Fi_TPRtYV0c?usp=sharing>`_


.. image:: ../../_static/MP2.LidarCamera.1.jpg
    :align: center

.. image:: ../../_static/MP2.LidarCamera.2.jpg
    :align: center

.. image:: ../../_static/MP2.LidarCamera.3.jpg
    :align: center


.. raw:: html

   <div style="page-break-before: always;"></div>
